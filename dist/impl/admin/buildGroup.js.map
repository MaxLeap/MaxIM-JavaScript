{"version":3,"sources":["../src/impl/admin/buildGroup.ts"],"names":[],"mappings":";;IAGA;QAOE,0BAAY,KAAY,EAAE,KAAa;YACrC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;YAClB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACrB,CAAC;QAEM,oCAAS,GAAhB,UAAiB,GAAW,EAAE,KAAU;YACtC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;YACvB,CAAC;YACD,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;YAC7B,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAEM,kCAAO,GAAd,UAAe,KAAa,EAAE,MAAc;YAC1C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACzB,EAAE,CAAC,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAChC,GAAG,CAAC,CAAY,UAAM,EAAN,iBAAM,EAAN,oBAAM,EAAN,IAAM,CAAC;oBAAlB,IAAM,CAAC,eAAA;oBACV,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACtB;YACH,CAAC;YACD,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAEM,6BAAE,GAAT,UAAU,QAA2B;YAArC,iBA8BC;YA7BC,IAAM,GAAG,GAAM,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,MAAM,YAAS,CAAC;YACpD,IAAM,IAAI,GAAG;gBACX,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,OAAO,EAAE,IAAI,CAAC,OAAO;aACtB,CAAC;YAEF,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,EAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,OAAO,EAAC,CAAC;iBACzE,IAAI,CAAC,UAAC,QAAQ;gBACb,MAAM,CAAC,QAAQ,CAAC,IAAc,CAAC;YACjC,CAAC,CAAC;iBACD,IAAI,CAAC,UAAC,OAAO;gBACZ,KAAI,CAAC,KAAK;qBACL,aAAa,CAAC,KAAI,CAAC,UAAU,CAAC;qBAC9B,QAAQ,CAAC,OAAO,EAAE,UAAC,GAAG;oBACrB,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;wBACb,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;4BACR,QAAQ,CAAC,GAAG,CAAC,CAAC;wBAChB,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,QAAQ,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;wBAC1B,CAAC;oBACH,CAAC;gBACH,CAAC,CAAC,CAAC;YACT,CAAC,CAAC;iBACD,KAAK,CAAC,UAAC,CAAC;gBACP,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACb,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACd,CAAC;YACH,CAAC,CAAC,CAAC;YACP,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;QACpB,CAAC;QACH,uBAAC;IAAD,CA9DA,AA8DC,IAAA;IAGC,wBAAgB,oBAHjB;IAIC","file":"buildGroup.js","sourcesContent":["import {Admin, GroupBuilder} from \"../../api/admin\";\nimport {Attributes, Callback} from \"../../model/models\";\n\nclass GroupBuilderImpl implements GroupBuilder {\n\n  private admin: Admin;\n  private owner: string;\n  private appends: string[];\n  private attributes: Attributes;\n\n  constructor(admin: Admin, owner: string) {\n    this.admin = admin;\n    this.appends = [];\n    this.owner = owner;\n  }\n\n  public attribute(key: string, value: any): GroupBuilder {\n    if (!this.attributes) {\n      this.attributes = {};\n    }\n    this.attributes[key] = value;\n    return this;\n  }\n\n  public members(first: string, others: string): GroupBuilder {\n    this.appends.push(first);\n    if (others && others.length > 0) {\n      for (const s of others) {\n        this.appends.push(s);\n      }\n    }\n    return this;\n  }\n\n  public ok(callback?: Callback<string>): Admin {\n    const url = `${this.admin.options().server}/groups`;\n    const data = {\n      owner: this.owner,\n      members: this.appends,\n    };\n\n    axios.post(url, JSON.stringify(data), {headers: this.admin.options().headers})\n        .then((response) => {\n          return response.data as string;\n        })\n        .then((groupid) => {\n          this.admin\n              .setAttributes(this.attributes)\n              .forGroup(groupid, (err) => {\n                if (callback) {\n                  if (err) {\n                    callback(err);\n                  } else {\n                    callback(null, groupid);\n                  }\n                }\n              });\n        })\n        .catch((e) => {\n          if (callback) {\n            callback(e);\n          }\n        });\n    return this.admin;\n  }\n}\n\nexport {\n  GroupBuilderImpl,\n};\n"]}