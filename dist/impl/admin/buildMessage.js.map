{"version":3,"sources":["../src/impl/admin/buildMessage.ts"],"names":[],"mappings":"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","file":"buildMessage.js","sourcesContent":["import {Admin, AdminMessageBuilder, AdminMessageLauncher} from \"../../api/admin\";\nimport {Media, PushSettings, Receiver, SystemMessageTo} from \"../../model/messages\";\nimport {AdminMessageLauncherImpl} from \"./launcher\";\n\nclass AdminMessageBuilderImpl implements AdminMessageBuilder {\n\n  private admin: Admin;\n  private receiver: {\n    id?: string;\n    type?: Receiver\n  };\n  private message: SystemMessageTo;\n\n  constructor(admin: Admin, text: string, remark?: string) {\n    this.admin = admin;\n    this.message = {\n      content: {\n        media: Media.TEXT,\n        body: text,\n      },\n    };\n    if (remark !== undefined && remark !== null) {\n      this.message.remark = remark;\n    }\n  }\n\n  public disablePush(): AdminMessageBuilder {\n    this.touchPush().enable = false;\n    return this;\n  }\n\n  public setPushSound(sound: string): AdminMessageBuilder {\n    this.touchPush().sound = sound;\n    return this;\n  }\n\n  public setPushBadge(badge: number): AdminMessageBuilder {\n    this.touchPush().badge = badge;\n    return this;\n  }\n\n  public setPushContentAvailable(contentAvailable: boolean): AdminMessageBuilder {\n    this.touchPush().contentAvailable = contentAvailable;\n    return this;\n  }\n\n  public setPushPrefix(prefix: string): AdminMessageBuilder {\n    this.touchPush().prefix = prefix;\n    return this;\n  }\n\n  public setPushSuffix(suffix: string): AdminMessageBuilder {\n    this.touchPush().suffix = suffix;\n    return this;\n  }\n\n  public setPushTextOverwrite(text: string): AdminMessageBuilder {\n    this.touchPush().overwrite = text;\n    return this;\n  }\n\n  public asText(): AdminMessageBuilder {\n    this.message.content.media = Media.TEXT;\n    return this;\n  }\n\n  public asImage(): AdminMessageBuilder {\n    this.message.content.media = Media.IMAGE;\n    return this;\n  }\n\n  public asAudio(): AdminMessageBuilder {\n    this.message.content.media = Media.AUDIO;\n    return undefined;\n  }\n\n  public asVideo(): AdminMessageBuilder {\n    this.message.content.media = Media.VIDEO;\n    return undefined;\n  }\n\n  public toAll(): AdminMessageLauncher {\n    this.receiver = {};\n    return new AdminMessageLauncherImpl(this.admin, this.message, this.receiver);\n  }\n\n  public toUser(userid: string): AdminMessageLauncher {\n    this.receiver = {\n      id: userid,\n      type: Receiver.ACTOR,\n    };\n    return new AdminMessageLauncherImpl(this.admin, this.message, this.receiver);\n  }\n\n  public toGroup(groupid: string): AdminMessageLauncher {\n    this.receiver = {\n      id: groupid,\n      type: Receiver.GROUP,\n    };\n    return new AdminMessageLauncherImpl(this.admin, this.message, this.receiver);\n  }\n\n  public toRoom(roomid: string): AdminMessageLauncher {\n    this.receiver = {\n      id: roomid,\n      type: Receiver.ROOM,\n    };\n    return new AdminMessageLauncherImpl(this.admin, this.message, this.receiver);\n  }\n\n  private touchPush(): PushSettings {\n    if (!this.message.push) {\n      this.message.push = {};\n    }\n    return this.message.push;\n  }\n}\n\nexport {\n  AdminMessageBuilderImpl,\n};\n"]}