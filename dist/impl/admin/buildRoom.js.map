{"version":3,"sources":["../src/impl/admin/buildRoom.ts"],"names":[],"mappings":";;IAGA;QAME,yBAAY,KAAY;YACtB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;YACrB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QACpB,CAAC;QAEM,iCAAO,GAAd,UAAe,KAAa;YAAE,gBAAmB;iBAAnB,WAAmB,CAAnB,sBAAmB,CAAnB,IAAmB;gBAAnB,+BAAmB;;YAC/C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACzB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACX,GAAG,CAAC,CAAY,UAAM,EAAN,iBAAM,EAAN,oBAAM,EAAN,IAAM,CAAC;oBAAlB,IAAM,CAAC,eAAA;oBACV,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACtB;YACH,CAAC;YACD,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAEM,mCAAS,GAAhB,UAAiB,GAAW,EAAE,KAAU;YACtC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;YAC7B,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAEM,4BAAE,GAAT,UAAU,QAA2B;YAArC,iBA+BC;YA9BC,IAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;YAChC,IAAM,GAAG,GAAM,EAAE,CAAC,MAAM,WAAQ,CAAC;YACjC,IAAM,IAAI,GAAG;gBACX,OAAO,EAAE,IAAI,CAAC,OAAO;aACtB,CAAC;YAEF,IAAM,MAAM,GAAG,EAAC,OAAO,EAAE,EAAE,CAAC,OAAO,EAAC,CAAC;YACrC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC;iBACxC,IAAI,CAAC,UAAC,QAAQ;gBACb,MAAM,CAAC,QAAQ,CAAC,IAAc,CAAC;YACjC,CAAC,CAAC;iBACD,IAAI,CAAC,UAAC,MAAM;gBACX,IAAM,IAAI,GAAM,EAAE,CAAC,MAAM,eAAU,MAAM,gBAAa,CAAC;gBACvD,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC;gBACjD,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE,EAAC,OAAO,EAAE,EAAE,CAAC,OAAO,EAAC,CAAC;qBACnD,IAAI,CAAC,UAAC,MAAM;oBACX,MAAM,CAAC,MAAM,CAAC;gBAChB,CAAC,CAAC,CAAC;YACT,CAAC,CAAC;iBACD,IAAI,CAAC,UAAC,MAAM;gBACX,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACb,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;gBACzB,CAAC;YACH,CAAC,CAAC;iBACD,KAAK,CAAC,UAAC,CAAC;gBACP,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACb,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACd,CAAC;YACH,CAAC,CAAC,CAAC;YACP,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;QACpB,CAAC;QACH,sBAAC;IAAD,CA3DA,AA2DC,IAAA;IAGC,uBAAe,mBAHhB;IAIC","file":"buildRoom.js","sourcesContent":["import {Admin, RoomBuilder} from \"../../api/admin\";\nimport {Callback} from \"../../model/models\";\n\nclass RoomBuilderImpl implements RoomBuilder {\n\n  private admin: Admin;\n  private attributes: { [key: string]: any };\n  private appends: string[];\n\n  constructor(admin: Admin) {\n    this.admin = admin;\n    this.attributes = {};\n    this.appends = [];\n  }\n\n  public members(first: string, ...others: string[]): RoomBuilder {\n    this.appends.push(first);\n    if (others) {\n      for (const s of others) {\n        this.appends.push(s);\n      }\n    }\n    return this;\n  }\n\n  public attribute(key: string, value: any): RoomBuilder {\n    this.attributes[key] = value;\n    return this;\n  }\n\n  public ok(callback?: Callback<string>): Admin {\n    const op = this.admin.options();\n    const url = `${op.server}/rooms`;\n    const body = {\n      members: this.appends,\n    };\n\n    const config = {headers: op.headers};\n    axios.post(url, JSON.stringify(body), config)\n        .then((response) => {\n          return response.data as string;\n        })\n        .then((roomid) => {\n          const url2 = `${op.server}/rooms/${roomid}/attributes`;\n          const postData = JSON.stringify(this.attributes);\n          return axios.post(url2, postData, {headers: op.headers})\n              .then((ignore) => {\n                return roomid;\n              });\n        })\n        .then((roomid) => {\n          if (callback) {\n            callback(null, roomid);\n          }\n        })\n        .catch((e) => {\n          if (callback) {\n            callback(e);\n          }\n        });\n    return this.admin;\n  }\n}\n\nexport {\n  RoomBuilderImpl,\n};\n"]}