{"version":3,"sources":["../src/impl/common/buildGetAttribute.ts"],"names":[],"mappings":";AAAA,IAAY,KAAK,WAAM,OAAO,CAAC,CAAA;AAI/B;IAME,kCAAY,MAAqB,EAAE,EAAU,EAAE,IAAa;QAC1D,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACnB,CAAC;IAEM,0CAAO,GAAd,UAAe,QAAwB;QACrC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACd,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,UAAQ,IAAI,CAAC,EAAI,EAAE,QAAQ,CAAC,CAAC;IAC5C,CAAC;IAEM,2CAAQ,GAAf,UAAgB,QAAwB;QACtC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACd,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,aAAW,IAAI,CAAC,EAAI,EAAE,QAAQ,CAAC,CAAC;IAC/C,CAAC;IAEM,0CAAO,GAAd,UAAe,QAAwB;QACrC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACd,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,YAAU,IAAI,CAAC,EAAI,EAAE,QAAQ,CAAC,CAAC;IAC9C,CAAC;IAEO,0CAAO,GAAf,UAAgB,IAAY,EAAE,QAAuB;QACnD,IAAI,GAAG,GAAG,KAAG,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,MAAM,GAAG,IAAI,gBAAa,CAAC;QAC9D,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACd,GAAG,IAAI,MAAI,IAAI,CAAC,IAAM,CAAC;QACzB,CAAC;QAED,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,EAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,OAAO,EAAC,CAAC;aACnD,IAAI,CAAC,UAAC,QAAQ;YACb,MAAM,CAAC,QAAQ,CAAC,IAAc,CAAC;QACjC,CAAC,CAAC;aACD,IAAI,CAAC,UAAC,MAAM;YACX,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACb,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;YACzB,CAAC;QACH,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,CAAC;YACP,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACb,QAAQ,CAAC,CAAC,CAAC,CAAC;YACd,CAAC;QACH,CAAC,CAAC,CAAC;IACT,CAAC;IACH,+BAAC;AAAD,CAtDA,AAsDC,IAAA;AAGC,gCAAwB,4BAHzB;AAIC","file":"buildGetAttribute.js","sourcesContent":["import * as axios from \"axios\";\nimport {CommonService, GetAttributesBuilder} from \"../../api/common\";\nimport {Callback} from \"../../model/models\";\n\nclass GetAttributesBuilderImpl implements GetAttributesBuilder {\n\n  private id: string;\n  private attr: string;\n  private common: CommonService;\n\n  constructor(common: CommonService, id: string, attr?: string) {\n    this.common = common;\n    this.id = id;\n    this.attr = attr;\n  }\n\n  public forUser(callback?: Callback<any>) {\n    if (!callback) {\n      return;\n    }\n    this.forAttr(`/ctx/${this.id}`, callback);\n  }\n\n  public forGroup(callback?: Callback<any>) {\n    if (!callback) {\n      return;\n    }\n    this.forAttr(`/groups/${this.id}`, callback);\n  }\n\n  public forRoom(callback?: Callback<any>) {\n    if (!callback) {\n      return;\n    }\n    this.forAttr(`/rooms/${this.id}`, callback);\n  }\n\n  private forAttr(path: string, callback: Callback<any>) {\n    let url = `${this.common.options().server}${path}/attributes`;\n    if (this.attr) {\n      url += `/${this.attr}`;\n    }\n\n    axios.get(url, {headers: this.common.options().headers})\n        .then((response) => {\n          return response.data as string;\n        })\n        .then((result) => {\n          if (callback) {\n            callback(null, result);\n          }\n        })\n        .catch((e) => {\n          if (callback) {\n            callback(e);\n          }\n        });\n  }\n}\n\nexport {\n  GetAttributesBuilderImpl,\n};\n"]}