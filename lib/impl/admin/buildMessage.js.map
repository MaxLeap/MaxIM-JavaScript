{"version":3,"sources":["../src/impl/admin/buildMessage.ts"],"names":[],"mappings":"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","file":"buildMessage.js","sourcesContent":["import {Admin, MessageBuilder, MessageLauncher} from \"../../api/admin\";\nimport {Media, PushSettings, Receiver, SystemMessageTo} from \"../../model/messages\";\nimport {AdminMessageLauncherImpl} from \"./launcher\";\n\nclass AdminMessageBuilderImpl implements MessageBuilder {\n\n  private admin: Admin;\n  private receiver: {\n    id?: string;\n    type?: Receiver\n  };\n  private message: SystemMessageTo;\n\n  constructor(admin: Admin, text: string, remark?: string) {\n    this.admin = admin;\n    this.message = {\n      content: {\n        media: Media.TEXT,\n        body: text,\n      },\n    };\n    if (remark !== undefined && remark !== null) {\n      this.message.remark = remark;\n    }\n  }\n\n  public disablePush(): MessageBuilder {\n    this.touchPush().enable = false;\n    return this;\n  }\n\n  public setPushSound(sound: string): MessageBuilder {\n    this.touchPush().sound = sound;\n    return this;\n  }\n\n  public setPushBadge(badge: number): MessageBuilder {\n    this.touchPush().badge = badge;\n    return this;\n  }\n\n  public setPushContentAvailable(contentAvailable: boolean): MessageBuilder {\n    this.touchPush().contentAvailable = contentAvailable;\n    return this;\n  }\n\n  public setPushPrefix(prefix: string): MessageBuilder {\n    this.touchPush().prefix = prefix;\n    return this;\n  }\n\n  public setPushSuffix(suffix: string): MessageBuilder {\n    this.touchPush().suffix = suffix;\n    return this;\n  }\n\n  public setPushTextOverwrite(text: string): MessageBuilder {\n    this.touchPush().overwrite = text;\n    return this;\n  }\n\n  public asText(): MessageBuilder {\n    this.message.content.media = Media.TEXT;\n    return this;\n  }\n\n  public asImage(): MessageBuilder {\n    this.message.content.media = Media.IMAGE;\n    return this;\n  }\n\n  public asAudio(): MessageBuilder {\n    this.message.content.media = Media.AUDIO;\n    return undefined;\n  }\n\n  public asVideo(): MessageBuilder {\n    this.message.content.media = Media.VIDEO;\n    return undefined;\n  }\n\n  public toAll(): MessageLauncher {\n    this.receiver = {};\n    return new AdminMessageLauncherImpl(this.admin, this.message, this.receiver);\n  }\n\n  public toUser(userid: string): MessageLauncher {\n    this.receiver = {\n      id: userid,\n      type: Receiver.ACTOR,\n    };\n    return new AdminMessageLauncherImpl(this.admin, this.message, this.receiver);\n  }\n\n  public toGroup(groupid: string): MessageLauncher {\n    this.receiver = {\n      id: groupid,\n      type: Receiver.GROUP,\n    };\n    return new AdminMessageLauncherImpl(this.admin, this.message, this.receiver);\n  }\n\n  public toRoom(roomid: string): MessageLauncher {\n    this.receiver = {\n      id: roomid,\n      type: Receiver.ROOM,\n    };\n    return new AdminMessageLauncherImpl(this.admin, this.message, this.receiver);\n  }\n\n  private touchPush(): PushSettings {\n    if (!this.message.push) {\n      this.message.push = {};\n    }\n    return this.message.push;\n  }\n}\n\nexport {\n  AdminMessageBuilderImpl,\n};\n"]}