{"version":3,"sources":["../src/impl/admin/launcher.ts"],"names":[],"mappings":";AACA,yBAAwC,sBAAsB,CAAC,CAAA;AAG/D;IASE,kCAAY,KAAY,EAAE,OAAwB,EAAE,QAA0C;QAC5F,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC3B,CAAC;IAEM,qCAAE,GAAT,UAAU,QAAyB;QACjC,IAAI,GAAG,GAAM,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,MAAM,YAAS,CAAC;QAClD,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;YACrB,GAAG,IAAI,MAAI,IAAI,CAAC,QAAQ,CAAC,EAAI,CAAC;YAC9B,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;gBAC3B,KAAK,mBAAQ,CAAC,KAAK;oBACjB,GAAG,IAAI,QAAQ,CAAC;oBAChB,KAAK,CAAC;gBACR,KAAK,mBAAQ,CAAC,IAAI;oBAChB,GAAG,IAAI,OAAO,CAAC;oBACf,KAAK,CAAC;gBACR;oBACE,KAAK,CAAC;YACV,CAAC;QACH,CAAC;QACD,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,EAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,OAAO,EAAC,CAAC;aACjF,IAAI,CAAC,UAAC,MAAM;YACX,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACb,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YACvB,CAAC;QACH,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,CAAC;YACP,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACb,QAAQ,CAAC,CAAC,CAAC,CAAC;YACd,CAAC;QACH,CAAC,CAAC,CAAC;QACP,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;IACH,+BAAC;AAAD,CA3CA,AA2CC,IAAA;AAGC,gCAAwB,4BAHzB;AAIC","file":"launcher.js","sourcesContent":["import {Admin, MessageLauncher} from \"../../api/admin\";\nimport {Receiver, SystemMessageTo} from \"../../model/messages\";\nimport {Callback} from \"../../model/models\";\n\nclass AdminMessageLauncherImpl implements MessageLauncher {\n\n  private admin: Admin;\n  private message: SystemMessageTo;\n  private receiver: {\n    type?: Receiver;\n    id?: string;\n  };\n\n  constructor(admin: Admin, message: SystemMessageTo, receiver: { type?: Receiver; id?: string }) {\n    this.admin = admin;\n    this.message = message;\n    this.receiver = receiver;\n  }\n\n  public ok(callback?: Callback<void>): Admin {\n    let url = `${this.admin.options().server}/system`;\n    if (this.receiver.id) {\n      url += `/${this.receiver.id}`;\n      switch (this.receiver.type) {\n        case Receiver.GROUP:\n          url += \"?group\";\n          break;\n        case Receiver.ROOM:\n          url += \"?room\";\n          break;\n        default:\n          break;\n      }\n    }\n    axios.post(url, JSON.stringify(this.message), {headers: this.admin.options().headers})\n        .then((ignore) => {\n          if (callback) {\n            callback(null, null);\n          }\n        })\n        .catch((e) => {\n          if (callback) {\n            callback(e);\n          }\n        });\n    return this.admin;\n  }\n}\n\nexport {\n  AdminMessageLauncherImpl,\n};\n"]}