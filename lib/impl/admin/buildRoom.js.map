{"version":3,"sources":["../src/impl/admin/buildRoom.ts"],"names":[],"mappings":";AAGA;IAME,yBAAY,KAAY;QACtB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IACpB,CAAC;IAEM,iCAAO,GAAd,UAAe,KAAa;QAAE,gBAAmB;aAAnB,WAAmB,CAAnB,sBAAmB,CAAnB,IAAmB;YAAnB,+BAAmB;;QAC/C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACzB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACX,GAAG,CAAC,CAAY,UAAM,EAAN,iBAAM,EAAN,oBAAM,EAAN,IAAM,CAAC;gBAAlB,IAAM,CAAC,eAAA;gBACV,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACtB;QACH,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,mCAAS,GAAhB,UAAiB,GAAW,EAAE,KAAU;QACtC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;QAC7B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,4BAAE,GAAT,UAAU,QAA2B;QAArC,iBA+BC;QA9BC,IAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;QAChC,IAAM,GAAG,GAAM,EAAE,CAAC,MAAM,WAAQ,CAAC;QACjC,IAAM,IAAI,GAAG;YACX,OAAO,EAAE,IAAI,CAAC,OAAO;SACtB,CAAC;QAEF,IAAM,MAAM,GAAG,EAAC,OAAO,EAAE,EAAE,CAAC,OAAO,EAAC,CAAC;QACrC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC;aACxC,IAAI,CAAC,UAAC,QAAQ;YACb,MAAM,CAAC,QAAQ,CAAC,IAAc,CAAC;QACjC,CAAC,CAAC;aACD,IAAI,CAAC,UAAC,MAAM;YACX,IAAM,IAAI,GAAM,EAAE,CAAC,MAAM,eAAU,MAAM,gBAAa,CAAC;YACvD,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC;YACjD,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE,EAAC,OAAO,EAAE,EAAE,CAAC,OAAO,EAAC,CAAC;iBACnD,IAAI,CAAC,UAAC,MAAM;gBACX,MAAM,CAAC,MAAM,CAAC;YAChB,CAAC,CAAC,CAAC;QACT,CAAC,CAAC;aACD,IAAI,CAAC,UAAC,MAAM;YACX,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACb,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;YACzB,CAAC;QACH,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,CAAC;YACP,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACb,QAAQ,CAAC,CAAC,CAAC,CAAC;YACd,CAAC;QACH,CAAC,CAAC,CAAC;QACP,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;IACH,sBAAC;AAAD,CA3DA,AA2DC,IAAA;AAGC,uBAAe,mBAHhB;AAIC","file":"buildRoom.js","sourcesContent":["import {Admin, RoomBuilder} from \"../../api/admin\";\nimport {Callback} from \"../../model/models\";\n\nclass RoomBuilderImpl implements RoomBuilder {\n\n  private admin: Admin;\n  private attributes: { [key: string]: any };\n  private appends: string[];\n\n  constructor(admin: Admin) {\n    this.admin = admin;\n    this.attributes = {};\n    this.appends = [];\n  }\n\n  public members(first: string, ...others: string[]): RoomBuilder {\n    this.appends.push(first);\n    if (others) {\n      for (const s of others) {\n        this.appends.push(s);\n      }\n    }\n    return this;\n  }\n\n  public attribute(key: string, value: any): RoomBuilder {\n    this.attributes[key] = value;\n    return this;\n  }\n\n  public ok(callback?: Callback<string>): Admin {\n    const op = this.admin.options();\n    const url = `${op.server}/rooms`;\n    const body = {\n      members: this.appends,\n    };\n\n    const config = {headers: op.headers};\n    axios.post(url, JSON.stringify(body), config)\n        .then((response) => {\n          return response.data as string;\n        })\n        .then((roomid) => {\n          const url2 = `${op.server}/rooms/${roomid}/attributes`;\n          const postData = JSON.stringify(this.attributes);\n          return axios.post(url2, postData, {headers: op.headers})\n              .then((ignore) => {\n                return roomid;\n              });\n        })\n        .then((roomid) => {\n          if (callback) {\n            callback(null, roomid);\n          }\n        })\n        .catch((e) => {\n          if (callback) {\n            callback(e);\n          }\n        });\n    return this.admin;\n  }\n}\n\nexport {\n  RoomBuilderImpl,\n};\n"]}