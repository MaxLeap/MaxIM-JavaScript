{"version":3,"sources":["../src/impl/session/session.ts"],"names":[],"mappings":";AAGA,6BAAiC,gBAAgB,CAAC,CAAA;AAElD;IAOE,qBAAY,MAAc,EAAE,MAAc;QACxC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;IAEM,6BAAO,GAAd;QACE,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;IACrB,CAAC;IAEM,yBAAG,GAAV,UAAW,IAAY,EAAE,MAAe;QACtC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAChB,MAAM,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAC;QACxC,CAAC;QACD,MAAM,CAAC,IAAI,iCAAkB,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;IACpD,CAAC;IAEM,2BAAK,GAAZ,UAAa,QAAyB;QACpC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACjB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;QACtB,CAAC;QACD,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACb,QAAQ,EAAE,CAAC;QACb,CAAC;IACH,CAAC;IACH,kBAAC;AAAD,CAjCA,AAiCC,IAAA;AAGC,mBAAW,eAHZ;AAIC","file":"session.js","sourcesContent":["import Socket = SocketIOClient.Socket;\nimport {MessageBuilder, Session} from \"../../api/session\";\nimport {Callback} from \"../../model/models\";\nimport {MessageBuilderImpl} from \"./buildMessage\";\n\nclass SessionImpl implements Session {\n\n  public socket: Socket;\n\n  private closed: boolean;\n  private userid: string;\n\n  constructor(socket: Socket, userid: string) {\n    this.closed = false;\n    this.socket = socket;\n    this.userid = userid;\n  }\n\n  public current(): string {\n    return this.userid;\n  }\n\n  public say(text: string, remark?: string): MessageBuilder {\n    if (this.closed) {\n      throw new Error(\"session is closed.\");\n    }\n    return new MessageBuilderImpl(this, text, remark);\n  }\n\n  public close(callback?: Callback<void>): void {\n    if (!this.closed) {\n      this.closed = true;\n      this.socket.close();\n    }\n    if (callback) {\n      callback();\n    }\n  }\n}\n\nexport {\n  SessionImpl,\n};\n"]}